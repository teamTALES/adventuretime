'use strict';

localStorage.setItem('gameInProgress', 'false');

const introForm = document.getElementById('character');
const resume = document.getElementById('resume');
const picks = document.querySelectorAll('.pick');

const player = {
    name: '',
    character: '',
    choices: '',
};

if (localStorage.getItem('settings')){
    /*
        Setting the style here creates an inline style (meaning its in the elements tag).
        This could be potentially problematic in the future, so generally when
        affecting styles from JS, we toggle a class (like y'all do elsewhere)
    
    */
    resume.setAttribute('style', 'display: inline-block');
}

const chooseAvatar = document.getElementById('chooseAvatar');
chooseAvatar.addEventListener('click', function(){
    player.character = event.target.id;
    picks.forEach(function(node){
        node.classList.remove('active');
    });
    event.target.classList.add('active');
    console.log(player.character);
});

introForm.addEventListener('submit', function(){
    event.preventDefault();

    player.name = this['character'].value;

    if (player.character === '' || player.character === 'chooseAvatar'){
        document.getElementById('error').textContent = 'Please select a character!';
    } else {
        localStorage.setItem('settings', JSON.stringify(player));
        localStorage.setItem('gameInProgress', 'true');
        window.location.href = 'game.html';
    }
});

resume.addEventListener('click', function(){
    localStorage.setItem('gameInProgress', 'true');
    window.location.href = 'game.html';
});



